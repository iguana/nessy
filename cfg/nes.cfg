# NESsy - ld65 linker configuration
# NROM-128: 16KB PRG-ROM + 8KB CHR-ROM (mapper 0)

MEMORY {
    # iNES header (16 bytes)
    HEADER:   start = $0000, size = $0010, type = ro, fill = yes, fillval = $00;

    # CPU RAM
    ZP:       start = $0010, size = $00F0, type = rw;         # Zero page ($10-$FF)
    OAM:      start = $0200, size = $0100, type = rw;         # Sprite OAM buffer
    RAM:      start = $0300, size = $0500, type = rw;         # General RAM ($0300-$07FF)

    # PRG-ROM (16KB at $C000-$FFFF)
    PRG:      start = $C000, size = $3FFA, type = ro, fill = yes, fillval = $FF;

    # Vectors at $FFFA-$FFFF (6 bytes: NMI, RESET, IRQ)
    VECTORS:  start = $FFFA, size = $0006, type = ro, fill = yes;

    # CHR-ROM (8KB)
    CHR:      start = $0000, size = $2000, type = ro, fill = yes, fillval = $00;
}

SEGMENTS {
    HEADER:   load = HEADER,  type = ro;
    ZEROPAGE: load = ZP,      type = zp;
    OAM:      load = OAM,     type = bss;
    BSS:      load = RAM,     type = bss;
    STARTUP:  load = PRG,     type = ro;
    CODE:     load = PRG,     type = ro;
    RODATA:   load = PRG,     type = ro;
    DATA:     load = PRG,     run = RAM, type = rw, define = yes;
    VECTORS:  load = VECTORS, type = ro;
    CHARS:    load = CHR,     type = ro;
}
